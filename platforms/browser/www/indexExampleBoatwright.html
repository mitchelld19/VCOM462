<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
	<title>GPS Test</title>
	<link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
	<link rel="stylesheet" type="text/css" href="css/index.css" />
	<script src="js/jquery1102.js"></script>
	<script src="js/jquery.mobile-1.4.5.min.js"></script>
	<!--<script src="js/gps-program.js"></script>-->
   <!--<style>
	   	h1 {margin-top: 50px;}
		p, a {margin: 10px;}
  </style>-->
  <style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map-canvas { height: 100% }
  </style>
</head>

<body>
  <!--  <div data-role="page" id="pageone">
        <h1>PhoneGap<br> Hello World</h1>
        <p class="geolocation"></p>

		<br/>
		<button id="getPosition">Position</button>
		<button id="watchPosition">Watch</button>

		<p><a href="#pagetwo">Go to Page Two</a></p>
	</div>
	<div data-role="page" id="pagetwo">
	    <h1>Welcome To page 2</h1>
	    <p>Page 2</p>
		<a href="#pageone">Go to Page One</a>
	</div>-->

  <script type="text/javascript">
  var map;
  document.addEventListener("deviceready", function() {
    var div = document.getElementById("map_canvas");

    // Initialize the map view
    map = plugin.google.maps.Map.getMap(div);

    // Wait until the map is ready status.
    map.addEventListener(plugin.google.maps.event.MAP_READY, onMapReady);
  }, false);

  function onMapReady() {
    var button = document.getElementById("button");
    button.addEventListener("click", onBtnClicked);
  }

  function onBtnClicked() {

    // Move to the position with animation
    map.animateCamera({
      target: {lat: 37.422359, lng: -122.084344},
      zoom: 17,
      tilt: 60,
      bearing: 140,
      duration: 5000
    }, function() {

      // Add a maker
      map.addMarker({
        position: {lat: 37.422359, lng: -122.084344},
        title: "Welecome to \n" +
               "Cordova GoogleMaps plugin for iOS and Android",
        snippet: "This plugin is awesome!",
        animation: plugin.google.maps.Animation.BOUNCE
      }, function(marker) {

        // Show the info window
        marker.showInfoWindow();

        // Catch the click event
        marker.on(plugin.google.maps.event.INFO_CLICK, function() {

          // To do something...
          alert("Hello world!");

        });
      });
    });
  }
  </script>
    <!--<div id="geolocation" style="width: 640px; height: 1136px;">-->
    <div id="map-canvas"></div>


    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <!--<script src="http://maps.google.com/maps/api/js" type="text/javascript"></script>-->
    <!--<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBN1S1ntN9u-IbHl8DSYdIN7dOkPxXgnVw&sensor=false"> </script>-->
    <script type="text/javascript">
      navigator.geolocation.getCurrentPosition(onSuccess, onError, { timeout: 30000 });
      function onSuccess(position) {
      var lat=position.coords.latitude;
      var lang=position.coords.longitude;

      //Google Maps
      var myLatlng = new google.maps.LatLng(lat,lang);
      var mapOptions = {zoom: 4,center: myLatlng}
      var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
      var marker = new google.maps.Marker({position: myLatlng,map: map});
      }
      function onError(error) {
      alert('code: ' + error.code + '\n' +
      'message: ' + error.message + '\n');
      }
      google.maps.event.addDomListener(window, 'load', onSuccess);

    </script>

    <script type="text/javascript">
        app.initialize();
    </script>
</body>

</html>
